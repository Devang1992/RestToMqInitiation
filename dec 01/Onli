bash -c 'OFFSET=$OFFSET; PARTITION=0; if [ -z "$OFFSET" ]; then echo "ERROR: Box variable OFFSET not found"; exit 1; fi; RESPONSE=$(curl -k -s -D - -o /dev/null "https://localhost:8080/jobs/launch?offset=$OFFSET&partition=$PARTITION"); LOCATION=$(echo "$RESPONSE" | grep -i "^Location:" | awk "{print \$2}" | tr -d "\r"); JOB_ID=$(basename "$LOCATION"); echo "Retry Job ID: $JOB_ID"; COUNT=0; STATUS="RUNNING"; while [ $COUNT -lt 60 ]; do sleep 15; STATUS=$(curl -k -s "https://localhost:8080/jobs/executions/$JOB_ID"); echo "Retry Status: $STATUS"; if [ "$STATUS" != "RUNNING" ]; then break; fi; COUNT=$(($COUNT + 1)); done; if [ "$STATUS" != "COMPLETED" ]; then echo "Retry job failed with status $STATUS"; exit 1; fi; echo "Retry completed successfully"; exit 0;'
